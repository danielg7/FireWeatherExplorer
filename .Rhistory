guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "vertical",
plot.background = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,5,1),
labels = seq(1,5,1))+
scale_fill_gradient(low="red", high="green")+
xlab("\n\nWeek of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "vertical",
plot.background = element_blank(),
panel.border = element_blank())
shiny::runApp()
View(wx_sub_test)
View(windowCount)
runApp()
View(prescriptionCount)
levels(prescriptionCount$Month)
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.border = element_blank())
runApp()
runApp()
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.border = element_blank())
windowCount <- wx_sub_test %>%
filter(Conditions == "Window")
wx_sub_test <- combinedWx %>%
mutate(Month = as.factor(Month)) %>%
mutate(Month = factor(Month,levels = c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"))) %>%
mutate(Yday = yday(DateTime)) %>%
mutate(weekday = wday(DateTime)) %>%
mutate(weekdayf = weekdays(DateTime, abbreviate = TRUE)) %>%
mutate(week = as.numeric(format(DateTime,"%W"))) %>%
group_by(Month) %>%
mutate(monthweek = 1 + week - min(week)) %>%
ungroup() %>%
count(Yday, Month, weekdayf, monthweek, Conditions) %>%
group_by(Yday) %>%
mutate(Percent = n / sum(n)) %>%
filter(Conditions %in% c("In Prescription","Window")) %>%
ungroup()
print(levels(wx_sub_test$Month))
wx_sub_test$weekdayf <- as.factor(wx_sub_test$weekdayf)
wx_sub_test$weekdayf <- factor(x = wx_sub_test$weekdayf, levels = rev(c("Mon","Tue","Wed","Thu","Fri","Sat","Sun")))
windowCount <- wx_sub_test %>%
filter(Conditions == "Window")
prescriptionCount <- wx_sub_test %>%
filter(Conditions == "In Prescription")
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.border = element_blank())
head(prescriptionCount)
head(wx_sub_test)
wx_sub_test <- combinedWx %>%
mutate(Month = as.factor(Month)) %>%
# mutate(Month = factor(Month,levels = c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"))) %>%
mutate(Yday = yday(DateTime)) %>%
mutate(weekday = wday(DateTime)) %>%
mutate(weekdayf = weekdays(DateTime, abbreviate = TRUE)) %>%
mutate(week = as.numeric(format(DateTime,"%W"))) %>%
group_by(Month) %>%
mutate(monthweek = 1 + week - min(week)) %>%
ungroup() %>%
count(Yday, Month, weekdayf, monthweek, Conditions) %>%
group_by(Yday) %>%
mutate(Percent = n / sum(n)) %>%
filter(Conditions %in% c("In Prescription","Window")) %>%
ungroup()
print(levels(wx_sub_test$Month))
wx_sub_test$weekdayf <- as.factor(wx_sub_test$weekdayf)
wx_sub_test$weekdayf <- factor(x = wx_sub_test$weekdayf, levels = rev(c("Mon","Tue","Wed","Thu","Fri","Sat","Sun")))
windowCount <- wx_sub_test %>%
filter(Conditions == "Window")
prescriptionCount <- wx_sub_test %>%
filter(Conditions == "In Prescription")
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.border = element_blank())
wx_sub_test <- combinedWx %>%
mutate(Month = as.factor(Month)) %>%
#mutate(Month = factor(Month,levels = c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"))) %>%
mutate(Yday = yday(DateTime)) %>%
mutate(weekday = wday(DateTime)) %>%
mutate(weekdayf = weekdays(DateTime, abbreviate = TRUE)) %>%
mutate(week = as.numeric(format(DateTime,"%W"))) %>%
group_by(Month) %>%
mutate(monthweek = 1 + week - min(week)) %>%
ungroup() %>%
count(Yday, Month, weekdayf, monthweek, Conditions) %>%
group_by(Yday) %>%
mutate(Percent = n / sum(n)) %>%
filter(Conditions %in% c("In Prescription","Window")) %>%
ungroup()
print(levels(wx_sub_test$Month))
wx_sub_test <- combinedWx %>%
mutate(Month = as.factor(Month)) %>%
#mutate(Month = factor(Month,levels = c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"))) %>%
mutate(Yday = yday(DateTime)) %>%
mutate(weekday = wday(DateTime)) %>%
mutate(weekdayf = weekdays(DateTime, abbreviate = TRUE)) %>%
mutate(week = as.numeric(format(DateTime,"%W"))) %>%
group_by(Month) %>%
mutate(monthweek = 1 + week - min(week)) %>%
ungroup() %>%
count(Yday, Month, weekdayf, monthweek, Conditions) %>%
group_by(Yday) %>%
mutate(Percent = n / sum(n)) %>%
filter(Conditions %in% c("In Prescription","Window")) %>%
ungroup()
print(levels(wx_sub_test$Month))
levels(wx_sub_test$Month) <- c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC")
wx_sub_test$weekdayf <- as.factor(wx_sub_test$weekdayf)
wx_sub_test$weekdayf <- factor(x = wx_sub_test$weekdayf, levels = rev(c("Mon","Tue","Wed","Thu","Fri","Sat","Sun")))
windowCount <- wx_sub_test %>%
filter(Conditions == "Window")
prescriptionCount <- wx_sub_test %>%
filter(Conditions == "In Prescription")
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid.minor = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(monthweek, weekdayf, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(monthweek, weekdayf), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
runApp()
plot_timeseries_temperature <- ggplot(data = wx_df,
aes(x = DayOfYear,
y = Temp))+
geom_point(alpha = 0.25, size = 0.25)+
scale_x_date("Day of the Year", labels = function(x){format(x, "%b")})+
scale_y_continuous("Temperature (F)")+
labs(title = "Temperature Records",
subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
facet_grid(facets = Year ~ .)+
theme_bw(base_size=15,
base_family="Avenir")
plot_timeseries_temperature <- ggplot(data = wx_df,
aes(x = DayOfYear,
y = Temp))+
geom_point(alpha = 0.25, size = 0.25)+
scale_x_date("Day of the Year", labels = function(x){format(x, "%b")})+
scale_y_continuous("Temperature (F)")+
labs(title = "Temperature Records",
subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
facet_grid(facets = Year ~ .)+
theme_bw(base_size=15, base_family="Avenir")
runApp()
runApp()
head(combinedWx)
View(combinedWx)
wx_sub_test <- combinedWx %>%
mutate(Month = as.factor(Month)) %>%
#mutate(Month = factor(Month,levels = c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"))) %>%
mutate(Yday = yday(DateTime)) %>%
mutate(weekday = wday(DateTime)) %>%
mutate(weekdayf = weekdays(DateTime, abbreviate = TRUE)) %>%
mutate(week = as.numeric(format(DateTime,"%W"))) %>%
group_by(Month) %>%
mutate(monthweek = 1 + week - min(week)) %>%
ungroup() %>%
count(Day, Month, Conditions) %>%
group_by(Day) %>%
mutate(Percent = n / sum(n)) %>%
filter(Conditions %in% c("In Prescription","Window")) %>%
ungroup()
print(levels(wx_sub_test$Month))
levels(wx_sub_test$Month) <- c("JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC")
wx_sub_test$weekdayf <- as.factor(wx_sub_test$weekdayf)
wx_sub_test$weekdayf <- factor(x = wx_sub_test$weekdayf, levels = rev(c("Mon","Tue","Wed","Thu","Fri","Sat","Sun")))
windowCount <- wx_sub_test %>%
filter(Conditions == "Window")
prescriptionCount <- wx_sub_test %>%
filter(Conditions == "In Prescription")
ggplot(prescriptionCount, aes(x = month, y = day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(month, day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
head(prescriptionCount)
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
scale_x_continuous(breaks = seq(1,6,1),
labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
facet_grid(. ~ Month)+
coord_fixed()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Week of Month") + ylab("")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
scale_x_discrete(limits = rev(levels(prescriptionCount$Month)))
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
scale_x_discrete(limits = rev(levels(prescriptionCount$Month)))+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
runApp()
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
scale_y_continuous(seq(1,31,1))+
scale_x_discrete(limits = rev(levels(prescriptionCount$Month)))+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
scale_y_continuous(limits = seq(1,31,1))+
scale_x_discrete(limits = rev(levels(prescriptionCount$Month)))+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
scale_y_continuous(breaks =  = seq(1,31,1))+
scale_x_discrete(limits = rev(levels(prescriptionCount$Month)))+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
ggplot(prescriptionCount, aes(x = Month, y = Day, fill = Percent*100)) +
geom_tile(fill = "gray", data = windowCount, aes(Month, Day), size = 0.25, colour = "white")+
geom_tile(colour="white",size=0.25) +
# facet_grid(. ~ Month)+
coord_fixed()+
coord_flip()+
#scale_x_continuous(breaks = seq(1,6,1),
#                  labels = seq(1,6,1))+
scale_fill_distiller("Percent of Hours\nin Prescription", type = "seq",direction = -1,palette = "YlGn")+
xlab("Month") + ylab("Day of Month")+
scale_y_continuous(breaks =  seq(1,31,1))+
scale_x_discrete(limits = rev(levels(prescriptionCount$Month)))+
guides("Percent of Hours in Prescription", size = guide_legend(ncol = 8))+
labs(title = "Percent of Hours That Match Prescription Parameters Per Day / Week of the Year", subtitle = paste(stationMetadata$STATION$NAME,": ",min(wx_df$Year)," - ",max(wx_df$Year),sep = ""))+
theme_bw(base_size=15, base_family="Avenir")+
theme(legend.position="bottom",
legend.direction = "horizontal",
plot.background = element_blank(),
panel.grid = element_blank(),
panel.border = element_blank())
runApp()
